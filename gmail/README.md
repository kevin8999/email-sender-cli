# README.md
This program sends email via gmail.

## Setup
First, install all the requirements in `requirements.txt`.

```python
pip install -r requirements.txt
```

Second, head to the Google Cloud Console. Ensure that Cloud Shell is activated. For instructions, please click [here](https://developers.google.com/workspace/guides/create-project#gcloud-cli).

Third, in the Google Cloud Console, create a Google Cloud project.

```shell
gcloud projects create PROJECT_ID
```

where `PROJECT_ID` is the ID of your project. You must create a unique project ID.

Fourth, set the Google Cloud Console to `PROJECT_ID`.

```shell
gcloud config set project PROJECT_ID
```

Fifth, in the Google Cloud Console, enable the Gmail services API.

```shell
gcloud services enable gmail.googleapis.com
```

Sixth, create an OAuth access credential. See [this article](https://developers.google.com/workspace/guides/create-credentials#oauth-client-id) for more information.

- Note, the application type should be **Desktop app**.
- You may have to create an OAuth consent screen. If so, do the following:
    1. Set **App name** to Email Sender
    2. Set **User support email** to your email.
    3. Set **Developer contact information** to your email.

Seventh, download the OAuth access credential. Save it in the same folder as `gmail/`. Name this file `credentials.json`.

Eight, run `quickstart.py`.

```shell
python3 quickstart.py
```

The terminal will output a URL for you to sign in. Click the URL, and sign in to the Google Account you would like to send emails from.

- Note: logging in via the Google Chrome browser is recommended.

Ninth, authorize the application to run on your account.

## Send Emails
This section details how to send emails. For example usage, see [Example Usage](#example-usage).

If you haven't already set up your machine to send emails, please see [Setup](#setup).

`send_message.py` will send an email message based on the message in `message.txt`.

These are its arguments:

```plain
usage: send_message.py [-h] -s SENDER -r RECEIVER --subject SUBJECT -m MESSAGE [-t TOKEN_FILE]

Send emails via Gmail.

options:
  -h, --help            show this help message and exit
  -s SENDER, --sender SENDER
                        Email address that will send mail
  -r RECEIVER, --receiver RECEIVER
                        Email address that will receive mail from sender
  --subject SUBJECT     Subject line of email
  -m MESSAGE, --message MESSAGE
                        File that contains the message body of email. Defaults to message.txt
  -t TOKEN_FILE, --token_file TOKEN_FILE
                        Name of token file generated by quickstart.py. Default name: token.json
```

### Example Usage

This section contains example usage of `send_message.py`.

To send an email:
- From `sender@email.com`
- To `receiver@email.com`
- Using `message.txt` as the file containing the message
- With `Hello World` as the subject

use this command:

```shell
python3 send_message.py --sender "sender@email.com" --receiver "receiver@email.com" --subject "Hello World" --message "message.txt" --token_file "token.json"
```

A prettier version of this command is:

```shell
python3 send_message.py             \
    --sender "sender@email.com" \
    --receiver "receiver@email.com" \
    --subject "Hello World" \
    --message "message.txt" \
    --token_file "token.json"
```
